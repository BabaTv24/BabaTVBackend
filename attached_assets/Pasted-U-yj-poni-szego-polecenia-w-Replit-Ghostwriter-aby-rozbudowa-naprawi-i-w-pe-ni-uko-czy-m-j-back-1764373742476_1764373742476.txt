UÅ¼yj poniÅ¼szego polecenia w Replit Ghostwriter, aby rozbudowaÄ‡, naprawiÄ‡ i w peÅ‚ni ukoÅ„czyÄ‡ mÃ³j backend â€BabaTVBackendâ€ zgodnie z aktualnÄ… strukturÄ… projektu. Projekt jest moduÅ‚owy, korzysta z Express.js + ESM + middleware + JWT login oraz folderÃ³w: /routes, /utils, /middleware, index.js. Zachowaj caÅ‚Ä… istniejÄ…cÄ… logikÄ™ i dopisz brakujÄ…ce moduÅ‚y opisane poniÅ¼ej. UÅ¼ywaj import/export (ESM). Upewnij siÄ™, Å¼e generowane pliki dziaÅ‚ajÄ… w Node.js na Render.com.

ğŸŸ£ CEL BACKENDU

UtwÃ³rz kompletny backend API dla aplikacji BabaTV24, ktÃ³ry obsÅ‚uguje:

RejestracjÄ™, logowanie, JWT

Panel Admina

AktywacjÄ™ 0.99 â‚¬ (Stripe lub PayPal â€” placeholder)

Kupony rabatowe

HTML Banner Ads + Deep-Link Push Ads

Testimonials

Chat user â†” admin

Video Loop Manager (URL do streamu TV)

Push notifications (Firebase WebPush)

SMS notifications (Twilio/Vonage placeholder)

User tagging + Premium toggle

Public endpoints do frontendu (Next.js)

Backend ma byÄ‡ kompatybilny z mojÄ… aktualnÄ… strukturÄ…:

backend/
â”œâ”€â”€ index.js
â”œâ”€â”€ routes/
â”‚   â”œâ”€â”€ auth.js
â”‚   â”œâ”€â”€ users.js
â”‚   â”œâ”€â”€ operators.js
â”‚   â”œâ”€â”€ payments.js
â”‚   â”œâ”€â”€ events.js
â”‚   â”œâ”€â”€ push.js
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ supabase.js
â”‚   â””â”€â”€ jwt.js
â”œâ”€â”€ middleware/
â”‚   â””â”€â”€ authMiddleware.js
â”œâ”€â”€ package.json

ğŸŸ£ ZADANIA DLA REPLIT GHOSTWRITER
ğŸ‘‰ 1) DODAJ NOWE ROUTERY DO /routes:

UtwÃ³rz nastÄ™pujÄ…ce pliki, w stylu ESM (import/export):

routes/ads.js â†’ zarzÄ…dzanie HTML Banner Ads

routes/coupons.js â†’ kupony

routes/testimonials.js â†’ opinie klientÃ³w

routes/sms.js â†’ SMS API

routes/chat.js â†’ chat userâ†”admin

routes/video.js â†’ TV Loop Manager

routes/admin.js â†’ panel admina (toggle premium, tagi uÅ¼ytkownikÃ³w)

KaÅ¼dy router ma eksportowaÄ‡ domyÅ›lnie:

import express from "express";
const router = express.Router();
export default router;

ğŸ‘‰ 2) ROZBUDUJ index.js â€” DODAJ IMPORTY + ROUTING

Dodaj:

import adsRoutes from "./routes/ads.js";
import couponsRoutes from "./routes/coupons.js";
import testimonialsRoutes from "./routes/testimonials.js";
import smsRoutes from "./routes/sms.js";
import chatRoutes from "./routes/chat.js";
import videoRoutes from "./routes/video.js";
import adminRoutes from "./routes/admin.js";


A nastÄ™pnie:

app.use("/api/ads", adsRoutes);
app.use("/api/coupons", couponsRoutes);
app.use("/api/testimonials", testimonialsRoutes);
app.use("/api/sms", smsRoutes);
app.use("/api/chat", chatRoutes);
app.use("/api/video", videoRoutes);
app.use("/api/admin", adminRoutes);

ğŸ‘‰ 3) ZACHOWAJ ISTNIEJÄ„CÄ„ LOGIKÄ˜

Nie usuwaj Å¼adnych routerÃ³w (auth, users, payments, events, operators, push).
Tylko rozszerz backend o brakujÄ…ce moduÅ‚y.

ğŸ‘‰ 4) DODAJ KOMPATYBILNE MIDDLEWARE

ObsÅ‚uga:

JSON body

CORS

JWT middleware

Error handler

ğŸ‘‰ 5) DODAJ â€IN-MEMORYâ€ magazyn danych

Backend nie uÅ¼ywa bazy na start â€” dodaj proste struktury tablicowe:

ads = []

coupons = []

testimonials = []

chats = []

videoLoop = { url: null }

KaÅ¼dy moduÅ‚ ma dziaÅ‚aÄ‡ bez bazy danych â€” kompatybilnie z Render FREE.

ğŸ‘‰ 6) DODAJ DEEP-LINK PUSH LOGIKÄ˜

W /routes/ads.js, /routes/push.js, oraz index.js zapewnij:

generowanie adId

endpoint /api/ads/:id

push z link: "/ad/" + id

ğŸ‘‰ 7) UTWÃ“RZ WERSJE PRODUKCYJNE

Backend ma byÄ‡ gotowy do deploy na Render:

ustaw PORT = process.env.PORT || 5000

popraw start script w package.json

dodaj type: "module"

upewnij siÄ™, Å¼e Å›cieÅ¼ki sÄ… wzglÄ™dne i zgodne z ESM

ğŸ‘‰ 8) FINALNA INSTRUKCJA OUTPUT

Po wygenerowaniu kodu:

pokaÅ¼ listÄ™ wszystkich zmodyfikowanych plikÃ³w

pokaÅ¼ nowe pliki w /routes

pokaÅ¼ finalnÄ… wersjÄ™ index.js

upewnij siÄ™, Å¼e repozytorium jest gotowe do wysyÅ‚ki na GitHub â†’ Render